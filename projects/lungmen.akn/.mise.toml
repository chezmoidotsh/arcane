# =============================================================================
# Lungmen.akn Cluster - Mise Configuration
# =============================================================================
# Project-specific mise configuration for the lungmen.akn cluster.
# This cluster is the migration target for home applications, replacing
# the legacy maison cluster with Talos Linux and ArgoCD architecture.
#
# Services: Home Applications (migrated from maison)
# Architecture: Talos Linux + ArgoCD
# =============================================================================

[tasks."diagram:generate"]
description = "Generate the architecture diagram for lungmen.akn cluster"
# Converts the D2 diagram source to SVG format for documentation
# Input: architecture.d2 (diagram-as-code source)
# Output: assets/architecture.<theme>.svg (embedded in cluster documentation)
run = "d2 --theme 0 architecture.d2 assets/architecture.svg"
dir = "{{ config_root }}"

[tasks."app:build"]
description = "Build all apps manifests to verify Kustomize configuration"
run = "kustomize build --enable-helm"
