# This file contains API keys. To load them from secrets, refer to https://docs.robusta.dev/master/setup-robusta/configuration-secrets.html

clusterName: lungmen.akn # NOTE - adjust the clusterName when adding additional clusters
sinksConfig:
  - robusta_sink:
      name: robusta_ui_sink
      token: '{{ env.ROBUSTA_UI_TOKEN }}'
enablePrometheusStack: true
enablePlatformPlaybooks: true
runner:
  sendAdditionalTelemetry: true
  additional_env_vars:
    - name: RELAY_EXTERNAL_ACTIONS_URL
      value: https://api.eu.robusta.dev/integrations/generic/actions
    - name: WEBSOCKET_RELAY_ADDRESS
      value: wss://relay.eu.robusta.dev
    - name: ROBUSTA_UI_DOMAIN
      value: https://platform.eu.robusta.dev
    - name: ROBUSTA_TELEMETRY_ENDPOINT
      value: https://api.eu.robusta.dev/telemetry
    - name: ROBUSTA_UI_TOKEN
      valueFrom:
        secretKeyRef:
          key: ROBUSTA_UI_TOKEN
          name: robusta-secrets
enableHolmesGPT: true
enabledManagedConfiguration: true
holmes:
  additionalEnvVars:
    - name: ROBUSTA_AI
      value: "true"
    - name: ROBUSTA_API_ENDPOINT
      value: https://api.eu.robusta.dev
    - name: ROBUSTA_UI_DOMAIN
      value: https://platform.eu.robusta.dev
    - name: ROBUSTA_UI_TOKEN
      valueFrom:
        secretKeyRef:
          key: ROBUSTA_UI_TOKEN
          name: robusta-secrets
  resources:
    requests:
      memory: 512Mi
isSmallCluster: true

kube-prometheus-stack:
  prometheusOperator:
    admissionWebhooks:
      certManager:
        enabled: true
  alertmanager:
    alertmanagerSpec:
      storage:
        volumeClaimTemplate:
          spec:
            resources:
              requests:
                storage: 250Mi
  prometheus:
    prometheusSpec:
      retentionSize: 900MB
      storageSpec:
        volumeClaimTemplate:
          spec:
            resources:
              requests:
                storage: 1Gi
