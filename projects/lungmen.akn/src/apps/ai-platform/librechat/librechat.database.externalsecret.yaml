---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: librechat-database-credentials
spec:
  dataFrom:
    - extract:
        key: lungmen.akn/librechat/database/postgresql
  refreshInterval: 5m
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault.chezmoi.sh
  target:
    template:
      data:
        username: librechat
        password: "{{ .password }}"
        ferretdb_url: "postgres://librechat:{{ .password }}@postgres-apps-secured-rw.databases.svc.cluster.local:5432/librechat"
        MONGO_URI: "mongodb://librechat:{{ .password }}@librechat-ferretdb.open-webui.svc.cluster.local:27017/LibreChat?authSource=admin&authMechanism=PLAIN"
