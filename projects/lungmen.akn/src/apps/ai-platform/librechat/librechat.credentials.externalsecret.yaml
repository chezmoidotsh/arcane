---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: librechat-credentials
spec:
  data:
    - secretKey: creds_key
      remoteRef:
        key: lungmen.akn/librechat/encryption/credentials
        property: creds_key
    - secretKey: creds_iv
      remoteRef:
        key: lungmen.akn/librechat/encryption/credentials
        property: creds_iv
    - secretKey: jwt_secret
      remoteRef:
        key: lungmen.akn/librechat/auth/jwt
        property: jwt_secret
    - secretKey: jwt_refresh_secret
      remoteRef:
        key: lungmen.akn/librechat/auth/jwt
        property: jwt_refresh_secret
    - secretKey: meili_master_key
      remoteRef:
        key: lungmen.akn/librechat/search/meilisearch
        property: master_key
  refreshInterval: 5m
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault.chezmoi.sh
  target:
    template:
      data:
        CREDS_KEY: "{{ .creds_key }}"
        CREDS_IV: "{{ .creds_iv }}"
        JWT_SECRET: "{{ .jwt_secret }}"
        JWT_REFRESH_SECRET: "{{ .jwt_refresh_secret }}"
        MEILI_MASTER_KEY: "{{ .meili_master_key }}"
