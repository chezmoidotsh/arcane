---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: pocket-id

labels:
  - pairs:
      app.kubernetes.io/name: pocket-id
    includeTemplates: true
    includeSelectors: true
  - pairs:
      app.kubernetes.io/instance: pocket-id
    includeTemplates: true
    includeSelectors: true
  - pairs:
      # renovate: datasource=docker depName=ghcr.io/pocket-id/pocket-id
      app.kubernetes.io/version: v1.10.0-distroless
    includeTemplates: true

resources:
  - pocket-id-public.httproute.yaml
  - pocket-id.externalsecret.yaml
  - pocket-id.httproute.yaml
  - pocket-id.postgresql.yaml
  - pocket-id.postgresql-backup.yaml
  - pocket-id.postgresql-objectstore.yaml
  - pocket-id.statefulset.yaml
  - security/

images:
  # renovate: datasource=docker depName=ghcr.io/pocket-id/pocket-id
  - name: ghcr.io/pocket-id/pocket-id
    newTag: "v1.10.0-distroless"
    digest: sha256:53aaee4ded66e2e163cd74b4bcfcf748c912672501346b08fa1bd8f21d295b81
