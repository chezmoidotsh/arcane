# ╭────────────────────────────────────────────────────────────────────────────╮
# │                        Architecture Diagram Styles                         │
# ├────────────────────────────────────────────────────────────────────────────┤
# │ Desc:                                                                      │
# │   This file contains common styles and classes used across all             │
# │   architecture diagrams in the project. It defines the visual appearance   │
# │   of different components and their relationships in D2 diagrams.          │
# ╰────────────────────────────────────────────────────────────────────────────╯
#
# ──────────────────────────────────────────────────────────────────────────────
# Usage Instructions
#
# 1. Import this file in your architecture diagram:
#    ...@../../docs/assets/d2/architecture-styles.d2
#
# 2. Apply component classes:
#    my-component: {
#      class: [application]          # Regular applications
#      class: [application-system]   # System-level applications
#      class: [namespace]            # Grouping components
#      class: [network]              # Network elements
#      class: [hardware]             # Physical hardware
#    }
#
# 3. Apply connection classes:
#    component1 -> component2: {class: [connect-to-internet]}
#
# ──────────────────────────────────────────────────────────────────────────────
# Available Component Styles
#
# - application: Regular applications (e.g., Jellyfin, n8n, Paperless)
# - application-system: System-level applications (e.g., Traefik, Cert-Manager)
# - application-datastore: Datastore applications (e.g., PostgreSQL, Redis)
# - namespace: Grouping container for related components
# - network: Network elements (e.g., internet, localnet, tailnet)
# - hardware: Physical hardware components (e.g., UDM-Pro)
# - platform: Platform services (e.g., Cloudflare, AWS)
# - tailscaled: Tailscale proxy nodes
# - undeployed: Components not yet deployed (reduced opacity)
#
# ──────────────────────────────────────────────────────────────────────────────
# Available Connection Styles
#
# - connect-network: Network connections (thick)
# - connect-from-internet / connect-to-internet: Internet connections (dashed, weighted)
# - connect-vpn-backbone: VPN backbone (bold)
# - connect-vpn: VPN connections (dashed)
# - connect-management: Management connections (dashed, medium width)

vars: {
  d2-config: {
    layout-engine: elk
    sketch: true
  }
}

# ╭────────────────────────────────────────────────────────────────────────────╮
# │                            Component Classes                               │
# ├────────────────────────────────────────────────────────────────────────────┤
# │ Desc:                                                                      │
# │   Visual style definitions for different types of components in the        │
# │   architecture diagrams. Each class defines shape, colors, and other       │
# │   visual properties.                                                       │
# ╰────────────────────────────────────────────────────────────────────────────╯

classes: {
  # ──────────────────────────────────────────────────────────────────────────────
  # Application Components
  
  application: {
    shape: rectangle
    style: {
      multiple: true
      shadow: false
    }
  }
  
  application-system: {
    shape: rectangle
    style: {
      multiple: true
      stroke-dash: 3
      opacity: 0.7
      font-size: 14
    }
  }
  
  application-datastore: {
    shape: cylinder
    style: {
      shadow: false
    }
    height: 160
    width: 180
  }

  # ──────────────────────────────────────────────────────────────────────────────
  # Network & Infrastructure Components
  
  network: {
    shape: cloud
    style: {
      text-transform: uppercase
      font-size: 24
      bold: true
    }
  }
  
  hardware: {
    shape: none
    style: {
      stroke-width: 3
      bold: true
    }
  }
  
  platform: {
    shape: none
    style: {
      stroke-width: 3
      bold: true
    }
  }
  
  tailscaled: {
    shape: image
    icon: ../icons/platform/tailscale.svg
    width: 48
    height: 48
  }

  # ──────────────────────────────────────────────────────────────────────────────
  # Organizational & State Components
  
  namespace: {
    shape: page
    style: {
      stroke-dash: 5
      text-transform: lowercase
    }
  }
  
  undeployed: {
    style: {
      opacity: 0.4
    }
  }



  # ──────────────────────────────────────────────────────────────────────────────
  # Network Connection Styles
  
  connect-network: {
    style {
      stroke-width: 8
    }
  }
  
  connect-from-internet: {
    style: {
      bold: true
      font-color: "#D7263D"
      stroke-dash: 3
      stroke-width: 8
      stroke: "#D7263D"
    }
  }
  
  connect-to-internet: {
    style: {
      stroke-dash: 3
      stroke-width: 3
      stroke: "#FF6B35"
      font-color: "#FF6B35"
    }
  }

  # ──────────────────────────────────────────────────────────────────────────────
  # VPN Connection Styles
  
  connect-vpn-backbone: {
    style: {
      bold: true
      font-size: 32
      stroke-width: 8
    }
  }
  
  connect-vpn: {
    style: {
      stroke-dash: 3
    }
  }

  # ──────────────────────────────────────────────────────────────────────────────
  # Management Connection Styles
  
  connect-management: {
    label: Manages
    style: {
      stroke-dash: 4
      stroke-width: 2
      stroke: "#9932CC" # DarkOrchid
    }
    target-arrowhead: {
      shape: circle
      style.filled: false
    }
  }
} 