# Kustomization for cert-manager default configuration
# Provides a default Let's Encrypt ClusterIssuer using DNS-01 challenge with Cloudflare
# Required: External Secrets Operator to sync credentials from OpenBao/Vault
---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: cert-manager-system

labels:
  - pairs:
      app.kubernetes.io/name: cert-manager
      app.kubernetes.io/part-of: cert-manager
    includeTemplates: true

resources:
  # External secret to sync Cloudflare API token from OpenBao
  - letsencrypt-issuer-credentials.externalsecret.yaml
  # ClusterIssuer for Let's Encrypt certificates using DNS-01 challenge
  - letsencrypt.clusterissuer.yaml
